<!DOCTYPE html>
<html>
<head>
  <title>
    ツリーテスト
  </title>
  <style>
  canvas{background-color: #99cc00;}
  </style>
</head>
<body>
  <canvas id="canvas" width="800" height="700">
  </canvas>
  <script type="text/javascript">
  var canvas = document.getElementById("canvas");
  var context = canvas.getContext("2d");

  //windowは小文字にする必要がある
  window.onload = function()
  {
    tree(12,400,700,200,90);
  }

  var tree = function(n,x,y,length,angle)
  {

    if(n < 0)
    {
      return
    }
    context.beginPath();
    context.lineWidth = n;
    if(n < 5)
    {
      context.strokeStyle = "rgb(0, 78, 45)";
    }
    else
    {
      context.strokeStyle = "rgb(153, 76, 0)";
    }
    context.moveTo(x, y);
    var DrawX = x + Math.cos(angle * Math.PI/180 ) * length;
    var DrawY = y + Math.sin(angle * Math.PI/180 ) * length;
    context.lineTo(DrawX, DrawY);
    context.stroke();
    tree(--n, x, y, length * 0.7, angle - 30);
    tree(--n, x, y, length * 0.7, angle + 30);
  }
  </script>
</body>
</html>
